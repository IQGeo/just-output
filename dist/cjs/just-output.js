!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jo=e():t.jo=e()}(this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>_,output:()=>p,section:()=>c,setCurrentTest:()=>r,specs:()=>n,subTest:()=>u,suite:()=>i,test:()=>a,testRunner:()=>A,tests:()=>M});const n=[],o={};let s;function r(t){o.test=t}function i(t,e){s=t,e&&(e(),s=void 0)}function a(t,e,o){const r="function"==typeof e?e:o,i="object"==typeof e?e:{},a=s?s+"_"+t:t;n.push({name:a.replace(/[^a-z0-9]/gi,"_"),testFunc:r,testOpts:i,suite:s})}function c(t,e){"function"==typeof e?(p("\n***",t),e()):p("\n***",...arguments)}function u(t,e,n){const s="function"==typeof e?e:n;o.test.subTests.push((async function(){p("\n***",t);try{await s()}catch(t){(t instanceof Error?t:new Error(t.msg||t)).stack.split("\n").forEach((t=>p(t)))}}))}function p(...t){const e=t.map((t=>"string"==typeof t?t:l(t)));o.test.output+=e.join(" "),o.test.output+="\n"}function l(t,e){t instanceof Set&&(t=[...t].sort());const n=Object.prototype.toString.call(t);e=e||1;const o=new Array(e+1).join("\t"),s=new Array(e).join("\t");if("[object Object]"===n){const n=[];for(const o in t)t.hasOwnProperty(o)&&n.push([o,l(t[o],e+1)]);return n.sort((function(t,e){return t[0]<e[0]?-1:1})),"{\n"+n.reduce((function(t,e,n){return(n?t+",\n":"")+o+'"'+e[0]+'": '+e[1]}),"")+"\n"+s+"}"}return"[object Array]"===n?"[\n"+t.reduce((function(t,n,s){return(s?t+",\n":"")+o+l(n,e+1)}),"")+"\n"+s+"]":"[object Number]"===n?t.toString().length>13||Math.abs(t)>1e12?parseFloat(t.toPrecision(12)).toString():t.toString():JSON.stringify(t,null,"\t")}const f=n;var d=function(t,e,n){void 0===n&&(n=function(t,e){return t===e});var o=[],s=function(r,i,a,c){var u=i-r+1,p=c-a+1;if(u>0&&p>0){var l=function(o,s,r,i){var a=s-o+1,c=i-r+1,u=a+c,p=a-c,l=(u+1)/2|0,f=null,d={},g={};d[1]=0,g[p-1]=a;for(var y=0;y<=l;y++){for(var T=-y;T<=y&&!f;T+=2)if(w=(j=T===-y||T!==y&&d[T-1]<d[T+1]?d[T+1]:d[T-1]+1)-T,!(isNaN(w)||j>a||w>c)){for(var v=j;j<a&&w<c&&n(t[o+j],e[r+w]);)j++,w++;d[T]=j,1==(1&p)&&m(T,p-(y-1),p+(y-1))&&d[T]>=g[T]&&(f=[v,j].map((t=>h(t,T))))}if(f)var b=2*y-1;for(T=-y;T<=y&&!f;T+=2){var j,w,S=T+p;if(w=(j=T===y||T!==-y&&g[S-1]<g[S+1]?g[S-1]:g[S+1]-1)-S,!(isNaN(w)||j<0||w<0)){for(v=j;j>0&&w>0&&n(t[o+j-1],e[r+w-1]);)j--,w--;g[S]=j,p%2==0&&m(S,-y,y)&&g[S]<=d[S]&&(f=[j,v].map((t=>h(t,S))))}}if(f){b=b||2*y;for(var O=0;O<2;O++)for(var R=0;R<2;R++)f[O][R]+=[o,r][R]-O;return f.concat([b,(u-b)/2])}}}(r,i,a,c),f=l[0][0],d=l[0][1],g=l[1][0],y=l[1][1];l[2]>1?(s(r,f-1,a,d-1),f<=g&&o.push(...t.slice(f,g+1)),s(g+1,i,y+1,c)):p>u?o.push(...t.slice(r,i+1)):o.push(...e.slice(a,c+1))}};return s(0,t.length-1,0,e.length-1),o},m=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e},h=function(t,e){return[t,t-e]};d.StringLCS=function(t,e){return d(t.split(""),e.split("")).join("")};var g=function(t,e,n){for(var o=e;o<this.length;o++)if(n(t,this[o]))return o;return-1};const y=function(t,e,n){void 0===n&&(n=function(t,e){return t===e});for(var o=[],s=0,r=0,i=t.length,a=e.length,c=0;s<i&&r<a&&n(t[s],e[r]);)s++,r++;for(;s<i&&r<a&&n(t[i-1],e[a-1]);)i--,a--,c++;o.push(...t.slice(0,s));for(var u=d(t.slice(s,i),e.slice(r,a),n),p=0;p<u.length;p++){var l=u[p],f=g.call(t,l,s,n),m=g.call(e,l,r,n);o.push(...t.slice(s,f).map((function(t){return{operation:"delete",atom:t}}))),o.push(...e.slice(r,m).map((function(t){return{operation:"add",atom:t}}))),o.push({operation:"none",atom:l}),s=f+1,r=m+1}return o.push(...t.slice(s,i).map((function(t){return{operation:"delete",atom:t}}))),o.push(...e.slice(r,a).map((function(t){return{operation:"add",atom:t}}))),o.push(...t.slice(i,i+c).map((function(t){return{operation:"none",atom:t}}))),o},T={tmpdir:void 0,getFilename:t=>{const e=t.testOpts.testFilename;return void 0===e?t.name:"function"==typeof e?e(t.name):e},getTestName:t=>t.name};let v,b,j=!1;class w{constructor(t,e){this._tests=t,v=e}setOptions(t){Object.assign(T,t)}async run(t,e){j=!1,v.startRun(e,T);let n=0,o=this._tests.length;for(const e of this._tests){if(j)break;if(t&&!O(t,e))continue;if(!R(e)){o--;continue}n++,b=e,r(e),e.output="",e.subTests=[],e.filename=T.getFilename(e);try{await this.runTest(e.testFunc);for(const t of e.subTests)await this.runTest(t)}catch(t){E(t)}try{await v.writeTmpResult(e)}catch(t){console.log(t)}let s;try{s=await v.getAcceptedResult(e)}catch(t){s=null}const i=S(s);v.handleResult(e,i)}1!==n&&n!==o&&console.log(`Ran ${n} tests out of ${o}`)}async runTest(t){try{await t()}catch(t){E(t)}}cancelTests(){j=!0}listTests(t){this.getTests(t,{logSkippedTests:!1}).forEach((t=>{console.log("test:",T.getTestName(t))}))}getTestsMeta(t){const e=this.getTests(t,{logSkippedTests:!1}),n=e.map((t=>t.name)),o=e.map((t=>({...t,filename:T.getFilename(t)}))).map((({name:t,testOpts:e,suite:n,filename:o})=>({name:t,testOpts:e,suite:n,filename:o}))).reduce(((t,e)=>(t[e.name]=e,t)),{});return{byTestName:o,order:n}}async listTestFilenames(t){this.getTests(t,{logSkippedTests:!1}).forEach((t=>{console.log(t.name+": "+T.getFilename(t))}))}getTests(t,e){let n=f;return t&&(n=n.filter(O.bind(null,t))),n=n.filter((t=>R(t,e))),n}}function S(t){const e=b.output;if(null===t)return{pass:!1,message:"No accepted output ("+v.getAcceptedResultPath()+")"};var n=y(e.split(/\r?\n/),t.split(/\r?\n/)),o=n.filter((t=>"object"==typeof t&&("add"==t.operation||"delete"==t.operation))),s={pass:0===o.length,message:""};if(s.pass)s.message="output is equal to accepted output";else{var r=[];o.forEach((t=>{"object"==typeof t&&"add"==t.operation?r.push("-  "+t.atom):"object"==typeof t&&"delete"==t.operation?r.push("+  "+t.atom):"object"==typeof t&&t.atom?r.push("   "+t.atom):r.push("   "+t)})),s.message="Expected output to match accepted output:\n"+r.join("\n"),s.diffs=o,s.comparison=n}return s}const O=function(t,e){return null!=e.name.match(t)},R=function(t,{logSkippedTests:e=!0}={}){const n=T.getTestName(t),o=t.testOpts.shouldRunTest;if(void 0===o)return!0;const s="function"==typeof o?o():!!o;return"string"==typeof s?(e&&console.log(`Skipping test ${n}: ${s}`),!1):!1!==s||(e&&console.log(`Skipping test ${n}`),!1)};function E(t){var e=t instanceof Error?t:new Error(t.msg||t);if(document&&document.location&&document.location.search&&document.location.search.indexOf("spec=")>=0){if(document.location.search.indexOf("catch=false")>=0)throw e;console.log(e.stack),N(e)}else N(e)}function N(t){t.stack.split("\n").forEach((t=>p(t)))}let x="results";const k={startRun(t,e){t&&(x=t),window.justOutputUIRender(!0)},writeTmpResult(t){},getAcceptedResult:t=>{return e=F(t)+"?"+Math.random(),new Promise((function(t,n){var o=new XMLHttpRequest;function s(){if(o.status>=200&&o.status<400){var e=o.response||o.responseText||o.responseXML;t(e)}else{const t=new Error("Status code was "+o.status);t.code=o.status,t.responseText=o.responseText,n(t)}}try{o.open("GET",e,!0),o.onreadystatechange=function(){4===o.readyState&&s()},o.onload=s,o.onerror=function(){n(new Error("Can't XHR "+JSON.stringify(e)))},o.send()}catch(t){n(t)}}));var e},getAcceptedResultPath:t=>F(t),handleResult(t,e){window.handleTestResult(e,t)}};function F(t){return x+"/"+t.filename+".txt"}const P=k,A=(t,e=P)=>new w(t,e),M=A(n),_={tests:M,testRunner:A,specs:n,suite:i,test:a,section:c,subTest:u,output:p};return e})()));